<article class="py-2">
  <p class="text-sm text-gray-800">
    {{ with .Params.authors }}
      {{ range $i, $a := . }}{{ if $i }}, {{ end }}{{ $a }}{{ end }}.
    {{ end }}

    {{ with .Date }}({{ .Format "2006" }}){{ end }}.
    <strong>{{ .Title }}</strong>.

    {{ with .Params.publication }} {{ . }}.{{ end }}

    {{/* Robust PDF link: use local vars + nested ifs to avoid parse errors */}}
    {{ if .Page }}
      {{ $pdf := .Page.Resources.GetMatch "*.pdf" }}
      {{ if $pdf }}
        <a class="ml-2 inline-block px-2 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700" href="{{ $pdf.RelPermalink }}" target="_blank" rel="noopener">PDF</a>
      {{ else if .Page.Params.pdf }}
        <a class="ml-2 inline-block px-2 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700" href="{{ .Page.Params.pdf }}" target="_blank" rel="noopener">PDF</a>
      {{ end }}
    {{ else }}
      {{ $pdf := .Resources.GetMatch "*.pdf" }}
      {{ if $pdf }}
        <a class="ml-2 inline-block px-2 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700" href="{{ $pdf.RelPermalink }}" target="_blank" rel="noopener">PDF</a>
      {{ else if .Params.pdf }}
        <a class="ml-2 inline-block px-2 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700" href="{{ .Params.pdf }}" target="_blank" rel="noopener">PDF</a>
      {{ end }}
    {{ end }}
  </p>
</article>