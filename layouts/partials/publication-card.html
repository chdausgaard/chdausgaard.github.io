<article class="publication py-4">
  <!-- Title -->
  <h3 class="text-xl font-semibold mb-1">{{ .Title }}</h3>

  <!-- Authors (comma-separated) -->
  {{ with .Params.authors }}
    <p class="text-gray-700 mb-1">{{ delimit . ", " }}</p>
  {{ end }}

  <!-- Venue / journal (italic) -->
  {{ with .Params.publication }}
    <p class="text-gray-600 mb-2"><em>{{ . | safeHTML }}</em></p>
  {{ end }}

  <!-- Optional image: checks .Params.featured_graph, .Params.featured_image, then first image in bundle
       (Placed here so it appears just above the abstract) -->
  {{ $img := .Resources.GetMatch .Params.featured_graph }}
  {{ if not $img }}
    {{ $img = .Resources.GetMatch .Params.featured_image }}
  {{ end }}
  {{ if not $img }}
    {{ $imgs := .Resources.Match "*.{png,jpg,jpeg,webp}" }}
    {{ if gt (len $imgs) 0 }}
      {{ $img = index $imgs 0 }}
    {{ end }}
  {{ end }}

  {{ if $img }}
    <figure class="mb-3">
      <!-- responsive: full width on small screens, ~50% width on md+ screens -->
      <img src="{{ $img.RelPermalink }}" alt="Image for {{ .Title }}" class="w-full md:w-1/2 mx-auto mb-3 object-contain rounded-md">
    </figure>
  {{ end }}

  <!-- Full abstract (prefer frontmatter.abstract, fallback to page content) -->
  {{ if .Params.abstract }}
    <div class="pub-abstract text-gray-800">{{ .Params.abstract | markdownify }}</div>
  {{ else }}
    <div class="pub-abstract text-gray-800">{{ .Content }}</div>
  {{ end }}

  <!-- Latest version PDF link: ONLY use the first PDF in the CURRENT PAGE BUNDLE -->
  {{ $bundlePDF := .Resources.GetMatch "*.pdf" }}
  {{ if $bundlePDF }}
    <p class="mt-3">
      <a href="{{ $bundlePDF.RelPermalink }}" class="inline-flex items-center px-3 py-1.5 bg-gray-800 text-white rounded hover:bg-gray-700" target="_blank" rel="noopener" download>
        Latest version
      </a>
    </p>
  {{ end }}

  <!-- thin grey separator -->
  <hr class="border-t border-gray-300 mt-6">
</article>